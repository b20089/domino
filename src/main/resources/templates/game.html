<!DOCTYPE html>
<html>

<head>
  <script th:inline="javascript">
    var alertStr2 = /*[[${room}]]*/
      function test1() {
        alert(alertStr2.id);
      }
    var alertStr3 = /*[[${roomid}]]*/
      function test2() {
        alert(alertStr3);
      }
    window.onload = function () {
      var sse1 = new EventSource('/intoRoom?test=' + alertStr3);
      sse1.onmessage = function (event) {
        console.log(event.data);
        var room = event.data[0];
        document.getElementById("a").textContent = room;
      }
    }
  </script>
</head>

<body>

  <a th:href="@{/back(userid=${user.id})}">もどる</a><br>

  <div th:if="${room}">
    <p>No.[[${room.id}]]</a></p>
  </div>
  <input type="button" value="Room.id," onclick="test1();" />
  <input type="button" value="RoomNo2," onclick="test2();" />

  <div th:if="${user}">
    あなたのID:[[${user.id}]]
    <div th:if="${count}">
      部屋の人数:[[${count}]]
    </div>
    <div th:if="${room}">
      ドミノの数:<a id="a"></a>
      ドミノの数:<a id="b"></a>
      ドミノの数:<a id="c"></a>
    </div>
  </div>

  <a th:href="@{/dominoSet(id=${room.id}, userid=${user.id})}">ドミノを設置</a><br>
  <a th:href="@{/dominoKnock(id=${room.id}, userid=${user.id})}">ドミノを倒す</a><br>

  <br>
  <div th:if="${player}">
    <div th:each="play:${player}">
      <tr>
        <td>[[${play.id}]]がドミノを置いた</td>
      </tr>
    </div>
  </div>

</body>

</html>
